function setViewportHeight(){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px");let t=.01*window.innerWidth;document.documentElement.style.setProperty("--vw",t+"px")}function toggleMenu(){const e=document.getElementById("navLinks"),t=document.querySelector(".menu-toggle");e&&t?(e.classList.toggle("active"),e.classList.contains("active")?(t.innerHTML="✕",t.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden"):(t.innerHTML="☰",t.setAttribute("aria-expanded","false"),document.body.style.overflow="")):console.error("Navigation elements not found")}window.addEventListener("load",setViewportHeight),window.addEventListener("resize",setViewportHeight),window.addEventListener("orientationchange",()=>{setTimeout(setViewportHeight,100)}),window.toggleMenu=function(){const e=document.getElementById("navLinks"),t=document.querySelector(".menu-toggle");e&&t?(e.classList.toggle("active"),e.classList.contains("active")?(t.innerHTML="✕",t.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden"):(t.innerHTML="☰",t.setAttribute("aria-expanded","false"),document.body.style.overflow="")):console.error("Navigation elements not found in global function")},document.addEventListener("DOMContentLoaded",()=>{let e=0,t=!1;document.addEventListener("touchstart",a=>{1===a.touches.length&&(e=a.touches[0].clientY,t=0===window.pageYOffset)}),document.addEventListener("touchmove",a=>{if(a.target===document.body||a.target===document.documentElement){const n=a.touches[0].clientY,s=n-e;e=n,t&&s>0&&a.preventDefault()}}),window.DeviceMotionEvent&&document.documentElement.style.setProperty("-webkit-overflow-scrolling","touch")}),document.addEventListener("click",e=>{const t=document.getElementById("navLinks"),a=document.querySelector(".menu-toggle"),n=document.querySelector(".navbar");n&&!n.contains(e.target)&&t&&t.classList.contains("active")&&(t.classList.remove("active"),a&&(a.innerHTML="☰",a.setAttribute("aria-expanded","false")),document.body.style.overflow="")}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".nav-links a"),t=document.getElementById("navLinks"),a=document.querySelector(".menu-toggle");t&&a&&(t.classList.remove("active"),a.setAttribute("aria-expanded","false"),a.innerHTML="☰",document.body.style.overflow=""),a&&(a.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),toggleMenu()}),a.addEventListener("touchend",e=>{e.preventDefault(),e.stopPropagation(),toggleMenu()})),e.forEach(e=>{e.addEventListener("click",()=>{t&&t.classList.contains("active")&&(t.classList.remove("active"),a&&(a.innerHTML="☰",a.setAttribute("aria-expanded","false")),document.body.style.overflow="")})})});const images=["assets/images/hero.jpg","assets/images/hero2.jpg","assets/images/hero3.jpg"];let current=0;const home=document.querySelector(".home");if(home){function changeBackground(){home.style.backgroundImage=`url(${images[current]})`,current=(current+1)%images.length}changeBackground(),setInterval(changeBackground,5e3)}const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},observerOptions);function filterGallery(e){document.querySelectorAll(".gallery .card").forEach(t=>{"all"===e||t.classList.contains(e)?t.style.display="block":t.style.display="none"})}async function loadReviews(){try{const e=document.getElementById("reviewsContainer");if(!e)return void console.log("Reviews container not found");e.innerHTML='<h3 style="color: #ff7e29; text-align: center; margin-bottom: 1.5rem;">What Our Travelers Say</h3><div class="reviews-loading">Loading reviews...</div>';const t=window.location.pathname.includes("/php/"),a=t?"get_reviews.php":"php/get_reviews.php";console.log("Loading reviews - Current path:",window.location.pathname),console.log("Loading reviews - Is in PHP dir:",t),console.log("Loading reviews - Reviews path:",a);const n=await fetch(a);if(console.log("Response status:",n.status),!n.ok)throw new Error("HTTP error! status: "+n.status);const s=await n.json();console.log("Reviews data received:",s),e.innerHTML='<h3 style="color: #ff7e29; text-align: center; margin-bottom: 1.5rem;">What Our Travelers Say</h3>',s.success&&s.reviews&&s.reviews.length>0?(console.log(`Displaying ${s.reviews.length} reviews`),s.reviews.forEach((e,t)=>{console.log(`Processing review ${t+1}:`,e),displayReview(e)})):(console.log("No reviews found or data.success is false"),e.innerHTML+='<div class="no-reviews">Be the first to share your experience!</div>')}catch(e){console.error("Error loading reviews:",e);const t=document.getElementById("reviewsContainer");t&&(t.innerHTML='<h3 style="color: #ff7e29; text-align: center; margin-bottom: 1.5rem;">What Our Travelers Say</h3><div class="reviews-error">Unable to load reviews at the moment. Error: '+e.message+"</div>")}}function displayReview(e){const t=document.getElementById("reviewsContainer");if(!t)return;const a=document.createElement("div");a.className="review-item";const n=Math.max(1,Math.min(5,parseInt(e.rating)||5)),s="★".repeat(n)+"☆".repeat(5-n),o=e.created_at?new Date(e.created_at).toLocaleDateString():"Recently";let i=e.image_url;!i||i.startsWith("http")||i.startsWith("../")||(i="../"+i);const r=i||"https://i.pravatar.cc/50?img="+Math.floor(70*Math.random()),l=e.name||"Anonymous",c=e.review_text||"No review text provided.";let d="";if(e.tour_photos)try{const t=JSON.parse(e.tour_photos);Array.isArray(t)&&t.length>0&&(d=`\n          <div class="review-tour-photos">\n            <h4 class="tour-photos-title">Tour Photos:</h4>\n            <div class="tour-photos-grid">\n              ${t.map((e,t)=>{let a=e;return a.startsWith("http")||a.startsWith("../")||(a="../"+e),`\n                  <img src="${a}" alt="Tour Photo ${t+1}" class="review-tour-photo" \n                       onclick="openPhotoModal('${a}')" \n                       onerror="console.log('Failed to load:', '${a}'); this.style.display='none';"\n                       onload="console.log('Loaded successfully:', '${a}');">\n                `}).join("")}\n            </div>\n          </div>\n        `)}catch(e){console.log("Error parsing tour photos:",e)}a.innerHTML=`\n    <div class="review-user">\n      <img src="${r}" alt="${l}" class="review-profile-photo" \n           onerror="this.src='https://i.pravatar.cc/50?img=${Math.floor(70*Math.random())}'; console.log('Profile photo failed:', '${r}');"\n           onload="console.log('Profile photo loaded:', '${r}');">\n      <div class="review-user-info">\n        <h3>${l}</h3>\n        <span>${o}</span>\n      </div>\n    </div>\n    <div class="review-stars">${s}</div>\n    <p class="review-text">${c}</p>\n    ${d}\n  `,t.appendChild(a)}async function submitReview(){const e=document.getElementById("submitReview"),t=e.querySelector(".btn-text"),a=e.querySelector(".btn-loading"),n=new FormData(document.getElementById("reviewForm")),s=n.get("name").trim(),o=n.get("reviewText").trim();if(s&&o){e.disabled=!0,t.style.display="none",a.style.display="inline";try{const o=window.location.pathname.includes("/php/"),i=o?"submit_review.php":"php/submit_review.php";console.log("Current path:",window.location.pathname),console.log("Is in PHP dir:",o),console.log("Submit path:",i);const r=await fetch(i,{method:"POST",body:n});if(!r.ok)throw new Error("HTTP error! status: "+r.status);const l=await r.json();l.success?(document.getElementById("reviewForm").reset(),document.getElementById("imagePreview").innerHTML="",document.getElementById("tourPhotosPreview").innerHTML="",document.getElementById("ratingValue").value=5,updateStars(5),showNotification(`Thank you ${s}! Your review has been submitted successfully.`,"success"),loadReviews()):showNotification(l.message||"Sorry, there was an error submitting your review. Please try again.","error")}catch(e){console.error("Error submitting review:",e),console.error("Error details:",e.message),showNotification(`Sorry, there was an error submitting your review: ${e.message}. Please try again.`,"error")}finally{e.disabled=!1,t.style.display="inline",a.style.display="none"}}else showNotification("Please fill in your name and review.","warning")}function updateStars(e){const t=document.getElementById("starRating");if(!t)return;const a=t.querySelectorAll("span[data-rating]"),n=document.getElementById("ratingLabel"),s={1:"Poor (1/5)",2:"Fair (2/5)",3:"Good (3/5)",4:"Very Good (4/5)",5:"Excellent (5/5)"};a.forEach((t,a)=>{a<e?(t.classList.add("active"),t.style.color="#ff7e29"):(t.classList.remove("active"),t.style.color="#666")}),n&&(n.textContent=s[e]||"Rate your experience")}function showNotification(e,t="info"){document.querySelectorAll(".notification").forEach(e=>e.remove());const a=document.createElement("div");a.className="notification notification-"+t,a.innerHTML=`\n    <span class="notification-message">${e}</span>\n    <button class="notification-close" onclick="this.parentElement.remove()">×</button>\n  `,document.body.appendChild(a),setTimeout(()=>{a.parentElement&&a.remove()},5e3),setTimeout(()=>{a.classList.add("notification-show")},100)}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".card, .testimonial, .section h2, .tour-card").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="all 0.6s ease",observer.observe(e)})}),document.addEventListener("DOMContentLoaded",()=>{function e(e="light"){"vibrate"in navigator&&navigator.vibrate("light"===e?10:"medium"===e?20:50),window.DeviceMotionEvent&&DeviceMotionEvent.requestPermission}document.querySelectorAll(".btn, .btn-outline, .card, .tour-card, .toolbar a, .nav-links a").forEach(t=>{t.addEventListener("touchstart",a=>{t.classList.contains("nav-links")&&"A"===t.tagName&&a.preventDefault(),t.style.transform="scale(0.95)",t.style.transition="transform 0.1s ease",t.classList.contains("btn")||t.classList.contains("btn-outline")?e("medium"):e("light")}),t.addEventListener("touchend",e=>{setTimeout(()=>{t.style.transform="",t.style.transition=""},100),t.classList.contains("btn")||t.classList.contains("btn-outline")||t.tagName}),t.addEventListener("touchcancel",()=>{t.style.transform="",t.style.transition=""})});const t=document.getElementById("toggleToolbar");if(t){let a=!1;t.addEventListener("touchstart",t=>{a=!0,e("medium")}),t.addEventListener("click",e=>{a&&(a=!1)})}}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("reviewForm"),t=document.getElementById("starRating"),a=document.getElementById("ratingValue"),n=document.getElementById("reviewerImage"),s=document.getElementById("imagePreview");loadReviews(),n&&n.addEventListener("change",e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{s.innerHTML=`<img src="${e.target.result}" alt="Preview">`},e.readAsDataURL(t)}else s.innerHTML=""});const o=document.getElementById("tourPhotos"),i=document.getElementById("tourPhotosPreview");if(o&&o.addEventListener("change",e=>{const t=e.target.files;if(i.innerHTML="",t.length>0){const e=document.createElement("div");e.className="review-tour-photos",e.style.marginTop="10px",Array.from(t).forEach((t,a)=>{if(t.type.startsWith("image/")){const n=new FileReader;n.onload=t=>{const n=document.createElement("div");n.style.position="relative",n.innerHTML=`\n                <img src="${t.target.result}" alt="Tour Photo ${a+1}" class="review-tour-photo" \n                     onclick="openPhotoModal('${t.target.result}')"\n                     style="cursor: pointer;">\n                <small style="display: block; text-align: center; margin-top: 5px; color: #aaa; font-size: 0.8em;">\n                  Photo ${a+1}\n                </small>\n              `,e.appendChild(n)},n.readAsDataURL(t)}}),i.appendChild(e);const a=document.createElement("p");a.style.color="#bbb",a.style.fontSize="0.85em",a.style.marginTop="10px",a.style.textAlign="center",a.innerHTML=`${t.length} photo${t.length>1?"s":""} selected. These will be displayed in the "What Our Travelers Say" section.`,i.appendChild(a)}}),t){t.querySelectorAll("span").forEach(e=>{e.addEventListener("click",()=>{const t=parseInt(e.dataset.rating);a.value=t,r(t)}),e.addEventListener("mouseover",()=>{r(parseInt(e.dataset.rating))})}),t.addEventListener("mouseleave",()=>{r(parseInt(a.value))}),r(5)}function r(e){const a=t.querySelectorAll("span[data-rating]"),n=document.getElementById("ratingLabel"),s={1:"Poor (1/5)",2:"Fair (2/5)",3:"Good (3/5)",4:"Very Good (4/5)",5:"Excellent (5/5)"};a.forEach((t,a)=>{a<e?(t.classList.add("active"),t.style.color="#ff7e29"):(t.classList.remove("active"),t.style.color="#666")}),n&&(n.textContent=s[e]||"Rate your experience")}e&&e.addEventListener("submit",async e=>{e.preventDefault(),await submitReview()})}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".options button").forEach(e=>{e.addEventListener("click",()=>{alert("You selected: "+e.innerText)})});const e=document.querySelector(".btn-cta");e&&e.addEventListener("click",e=>{e.preventDefault(),alert("Thank you for your interest! We'll get back to you soon.")})});const destinations={colombo:{title:"Colombo",places:[{name:"Colombo Lighthouse",image:"assets/images/colombo light house.jpg"},{name:"Red Mosque",image:"assets/images/Red Mosque.jpg"},{name:"Pettah Market",image:"assets/images/Pettah Market.jpg"},{name:"Independence Square",image:"assets/images/Independence Square.jpg"},{name:"Shopping Mall",image:"assets/images/shopping mall colombo.jpg"},{name:"Lotus Tower",image:"assets/images/Lotus Tower.jpg"},{name:"Gangaramaya Temple",image:"assets/images/Gangaramaya Temple.jpg"}]},sigiriya:{title:"Sigiriya",places:[{name:"Sigiriya Lion Rock",image:"assets/images/sigiriya.jpg"},{name:"Golden Cave Temple",image:"assets/images/dambulla.jpg"},{name:"Habarana Wild Safari",image:"assets/images/Habarana Wild Safari.jpg"},{name:"Village Tours",image:"assets/images/sigiriya 2.jpg"},{name:"Wood Carving Industry",image:"assets/images/sigiriyasafari.jpg"}]},galle:{title:"Galle",places:[{name:"Dutch Fort",image:"assets/images/gallefort.jpg"},{name:"Old Fruit Market",image:"assets/images/gallefruitmarket.jpg"},{name:"Tsunami Museum",image:"assets/images/galletsunamimuseum.jpg"},{name:"Wooden Mask Museum",image:"assets/images/gallemaskmuseum.jpg"},{name:"Moonstone Mine",image:"assets/images/galle.jpg"},{name:"Silk Factory",image:"assets/images/gallesilk.jpg"}]},hikkaduwa:{title:"Hikkaduwa",places:[{name:"Turtle Beach",image:"assets/images/hikkaduwa.jpg"},{name:"Snorkeling & Diving",image:"assets/images/hikkaduwa.jpg"},{name:"Seafood Restaurants",image:"assets/images/hikkaduwa.jpg"},{name:"Night Disco Party",image:"assets/images/hikkaduwa.jpg"}]},kandy:{title:"Kandy",places:[{name:"Temple of the Tooth Relic",image:"assets/images/Temple of Tooth.jpg"},{name:"Kandy Lake Round",image:"assets/images/Kandy Lake.jpg"},{name:"Peradeniya Botanical Garden",image:"assets/images/Botanical Garden.jpg"},{name:"Queens Hotel",image:"assets/images/kandy.jpg"},{name:"Silk & Batik Industry",image:"assets/images/kandysilk.jpg"}]},matara:{title:"Matara",places:[{name:"Pigeon Island",image:"assets/images/matara.jpg"},{name:"Dutch Fort",image:"assets/images/matara.jpg"}]},nuwaraeliya:{title:"Nuwara Eliya",places:[{name:"Largest Tea Plantation",image:"assets/images/nuwaraeliya.jpg"},{name:"Waterfalls",image:"assets/images/ellawaterfalls.jpg"},{name:"Pink Post Office",image:"assets/images/nuwaraeliya.jpg"},{name:"Hakgala Botanical Garden",image:"assets/images/nuwaraeliya.jpg"},{name:"Gregory Lake",image:"assets/images/nuwaraeliya.jpg"},{name:"Horton Plains",image:"assets/images/hortain plains.jpg"},{name:"Adisham Bungalow",image:"assets/images/nuwaraeliya.jpg"}]},pinnawala:{title:"Pinnawala",places:[{name:"Pinnawala Elephant Orphanage",image:"assets/images/pinnawalaelephants.jpg"}]},arugambay:{title:"Arugam Bay",places:[{name:"Arugam Bay Beach",image:"assets/images/arugambaybeach.jpg"}]},yala:{title:"Yala",places:[{name:"Yala National Park",image:"assets/images/yalapark.jpg"}]},udawalawa:{title:"Udawalawa",places:[{name:"Udawalawa National Park",image:"assets/images/udawalawapark.jpg"}]},ella:{title:"Ella",places:[{name:"Nine Arch Bridge",image:"assets/images/ellaninearch.jpg"},{name:"Train Tour",image:"assets/images/ellatrain.jpg"},{name:"Little Adam's Peak",image:"assets/images/ellalittleadam.jpg"},{name:"Waterfalls",image:"assets/images/ellawaterfalls.jpg"},{name:"Tea Plantation",image:"assets/images/ellatea.jpg"},{name:"Adventure Park",image:"assets/images/ellaadventure.jpg"}]},mirissa:{title:"Mirissa",places:[{name:"Blue Whale Watching",image:"assets/images/mirissawhale.jpg"},{name:"Mirissa Beach",image:"assets/images/mirissabeach.jpg"},{name:"Coconut Tree Hill",image:"assets/images/mirissa.jpg"},{name:"Stilt Fishing",image:"assets/images/mirissastilt.jpg"},{name:"Deep Sea Fishing",image:"assets/images/mirissafishing.jpg"}]},sinharaja:{title:"Sinharaja Rain Forest",places:[{name:"Rain Forest Trekking",image:"assets/images/sinharaja rain forest.jpg"}]},polonnaruwa:{title:"Polonnaruwa",places:[{name:"Ancient Kingdom",image:"assets/images/polonnaruwakingdom.jpg"},{name:"Buddhist Stupa",image:"assets/images/polonnaruwastupa.jpg"},{name:"Monastic Buildings",image:"assets/images/polonnaruwamonastic.jpg"}]},adamspeak:{title:"Adam's Peak",places:[{name:"Adam's Peak Hiking",image:"assets/images/adams peak.jpg"}]}},modal=document.getElementById("destinationModal"),modalTitle=document.getElementById("modalTitle"),placesGrid=document.getElementById("placesGrid"),closeBtn=document.querySelector(".close");function openPhotoModal(e){const t=document.getElementById("photoModal");t&&t.remove();const a=document.createElement("div");a.id="photoModal",a.className="photo-modal",a.innerHTML=`\n    <span class="photo-modal-close" onclick="closePhotoModal()">&times;</span>\n    <img class="photo-modal-content" src="${e}" alt="Tour Photo">\n  `,document.body.appendChild(a),a.style.display="block",a.addEventListener("click",e=>{e.target===a&&closePhotoModal()}),document.addEventListener("keydown",handleEscapeKey)}function closePhotoModal(){const e=document.getElementById("photoModal");e&&e.remove(),document.removeEventListener("keydown",handleEscapeKey)}function handleEscapeKey(e){"Escape"===e.key&&closePhotoModal()}async function refreshGallery(){try{const e=await fetch("gallery.php"),t=await e.text(),a=new DOMParser,n=a.parseFromString(t,"text/html").querySelector(".gallery-grid"),s=document.querySelector(".gallery-grid");if(n&&s){const e=n.querySelectorAll("img").length;if(e>s.querySelectorAll("img").length){s.innerHTML=n.innerHTML;s.querySelectorAll("img").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("src");t&&openPhotoModal(t)})}),showNotification("Gallery updated with new images!","success");const e=document.querySelector(".filter-btn.active");e&&e.click()}}}catch(e){console.log("Gallery refresh error:",e)}}modal&&modalTitle&&placesGrid&&closeBtn&&(document.querySelectorAll(".more-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-destination"),a=destinations[t];modalTitle.textContent=a.title,placesGrid.innerHTML="",a.places.forEach(e=>{const t=document.createElement("div");t.classList.add("place-card"),t.innerHTML=`\n          <img src="${e.image}" alt="${e.name}">\n          <p>${e.name}</p>\n        `,placesGrid.appendChild(t)}),modal.style.display="block"})}),closeBtn.onclick=()=>modal.style.display="none",window.onclick=e=>{e.target==modal&&(modal.style.display="none")}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".contact-form");if(e){e.addEventListener("submit",async t=>{t.preventDefault();const a=document.getElementById("name").value.trim(),n=document.getElementById("email").value.trim(),s=document.getElementById("message").value.trim(),o=document.getElementById("subject").value.trim();if(!a||!n||!s)return void showNotification("Please fill in all required fields (Name, Email, Message).","error");if(!function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.toLowerCase())}(n))return void showNotification("Please enter a valid email address.","error");const i=document.getElementById("submitBtn"),r=i.querySelector(".btn-text"),l=i.querySelector(".btn-loading");i.disabled=!0,r.style.display="none",l.style.display="inline";try{const t=new FormData;t.append("name",a),t.append("email",n),t.append("subject",o),t.append("message",s);const c=window.location.pathname.includes("/php/")?"simple_contact_handler.php":"php/simple_contact_handler.php",d=await fetch(c,{method:"POST",body:t});if(!d.ok)throw new Error("HTTP error! status: "+d.status);const m=await d.json();m.success?(e.reset(),showNotification(m.message,"success")):showNotification(m.message||"Sorry, there was an error sending your message.","error")}catch(e){console.error("Contact form error:",e),showNotification("Sorry, there was an error sending your message. Please try again or contact us directly at dinethrap2002@gmail.com","error")}finally{i.disabled=!1,r.style.display="inline",l.style.display="none"}})}}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".filter-btn"),t=document.querySelectorAll(".gallery-grid img");e.length>0&&t.length>0&&e.forEach(a=>{a.addEventListener("click",()=>{e.forEach(e=>e.classList.remove("active")),a.classList.add("active");const n=a.getAttribute("data-category");t.forEach(e=>{const t=e.getAttribute("data-category");"all"===n||t===n?(e.style.display="block",e.style.animation="fadeIn 0.5s ease"):e.style.display="none"})})}),window.location.pathname.includes("gallery.php")&&setInterval(()=>{refreshGallery()},3e4)}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("button, .btn, .btn-outline, .more-btn, .btn-cta, .btn-submit, .contact-btn, .menu-toggle, .toggle-btn, .toolbar a, [onclick]").forEach(e=>{let t=!1;e.addEventListener("touchstart",()=>{t=!0},{passive:!0}),e.addEventListener("touchend",e=>{t&&(t=!1)},{passive:!0}),e.hasAttribute("data-click-handler-added")||(e.addEventListener("click",t=>{"A"===e.tagName&&e.href&&"#"!==e.href&&!e.getAttribute("onclick")&&(window.location.href=e.href)}),e.setAttribute("data-click-handler-added","true"))}),navigator.userAgent.includes("Safari")&&navigator.userAgent.includes("Mobile")&&(document.body.style.cursor="pointer")});const mainToggleBtn=document.getElementById("toggleToolbar"),mainToolbar=document.getElementById("contactToolbar");if(mainToggleBtn&&mainToolbar){const e=mainToggleBtn.cloneNode(!0);mainToggleBtn.parentNode.replaceChild(e,mainToggleBtn),e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),mainToolbar.classList.toggle("minimized")}),e.addEventListener("touchend",e=>{e.preventDefault(),e.stopPropagation(),mainToolbar.classList.toggle("minimized")})}